var h=void 0,i=!0,j=null,p=!1,q,t=this;function aa(a,b){var c=a.split("."),d=t;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&u(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function v(){}function ba(a){a.oa=function(){return a.mb?a.mb:a.mb=new a}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return a!==h}function da(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ea(a){return"string"==typeof a}function fa(a){return"function"==ca(a)}function ga(a){var b=typeof a;return"object"==b&&a!=j||"function"==b}function x(a){return a[ha]||(a[ha]=++ia)}var ha="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ia=0;
function ja(a,b,c){return a.call.apply(a.bind,arguments)}function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function la(a,b,c){la=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return la.apply(j,arguments)}
function ma(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var na=Date.now||function(){return+new Date};function z(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c};function ua(a){if(!va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(za,"&quot;"));return a}var wa=/&/g,xa=/</g,ya=/>/g,za=/\"/g,va=/[&<>\"]/;var B=Array.prototype,Aa=B.indexOf?function(a,b,c){return B.indexOf.call(a,b,c)}:function(a,b,c){c=c==j?0:0>c?Math.max(0,a.length+c):c;if(ea(a))return!ea(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},C=B.forEach?function(a,b,c){B.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ea(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ba=B.map?function(a,b,c){return B.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ea(a)?a.split(""):
a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ca=B.some?function(a,b,c){return B.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ea(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return i;return p};function Da(a,b,c,d){B.splice.apply(a,Ea(arguments,1))}function Ea(a,b,c){return 2>=arguments.length?B.slice.call(a,b):B.slice.call(a,b,c)}function Fa(a,b){return a>b?1:a<b?-1:0};function Ga(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Ha(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Ia="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ja(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ia.length;f++)c=Ia[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ka,La,Ma,Na,Oa,Pa,Qa;function Ra(){return t.navigator?t.navigator.userAgent:j}function Sa(){return t.navigator}Na=Ma=La=Ka=p;var Ta;if(Ta=Ra()){var Ua=Sa();Ka=0==Ta.indexOf("Opera");La=!Ka&&-1!=Ta.indexOf("MSIE");Ma=!Ka&&-1!=Ta.indexOf("WebKit");Na=!Ka&&!Ma&&"Gecko"==Ua.product}var Va=Ka,D=La,G=Na,H=Ma,Wa,Xa=Sa();Wa=Xa&&Xa.platform||"";Oa=-1!=Wa.indexOf("Mac");Pa=-1!=Wa.indexOf("Win");Qa=-1!=Wa.indexOf("Linux");var Ya=!!Sa()&&-1!=(Sa().appVersion||"").indexOf("X11"),Za;
a:{var $a="",ab;if(Va&&t.opera)var bb=t.opera.version,$a="function"==typeof bb?bb():bb;else if(G?ab=/rv\:([^\);]+)(\)|;)/:D?ab=/MSIE\s+([^\);]+)(\)|;)/:H&&(ab=/WebKit\/(\S+)/),ab)var cb=ab.exec(Ra()),$a=cb?cb[1]:"";if(D){var db,eb=t.document;db=eb?eb.documentMode:h;if(db>parseFloat($a)){Za=String(db);break a}}Za=$a}var fb={};
function L(a){var b;if(!(b=fb[a])){b=0;for(var c=String(Za).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",m=RegExp("(\\d*)(\\D*)","g"),s=RegExp("(\\d*)(\\D*)","g");do{var n=m.exec(g)||["","",""],l=s.exec(k)||["","",""];if(0==n[0].length&&0==l[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==l[1].length?0:parseInt(l[1],10))?-1:(0==n[1].length?0:parseInt(n[1],
10))>(0==l[1].length?0:parseInt(l[1],10))?1:0)||((0==n[2].length)<(0==l[2].length)?-1:(0==n[2].length)>(0==l[2].length)?1:0)||(n[2]<l[2]?-1:n[2]>l[2]?1:0)}while(0==b)}b=fb[a]=0<=b}return b}var gb={};function hb(a){return gb[a]||(gb[a]=D&&!!document.documentMode&&document.documentMode>=a)};function ib(){this.a=na()}new ib;ib.prototype.set=function(a){this.a=a};function M(){0!=jb&&(this.yc=Error().stack,kb[x(this)]=this)}var jb=0,kb={};M.prototype.ma=p;M.prototype.Ia=function(){if(!this.ma&&(this.ma=i,this.j(),0!=jb)){var a=x(this);delete kb[a]}};function lb(a,b){a.K||(a.K=[]);a.K.push(b)}M.prototype.j=function(){this.K&&mb.apply(j,this.K);if(this.Da)for(;this.Da.length;)this.Da.shift()()};function nb(a){a&&"function"==typeof a.Ia&&a.Ia()}function mb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];da(d)?mb.apply(j,d):nb(d)}};function ob(a,b){this.type=a;this.d=this.target=b}q=ob.prototype;q.Ia=function(){};q.R=p;q.qa=p;q.Ca=i;q.Ka=function(){this.R=i};q.o=function(){this.qa=i;this.Ca=p};function pb(a){a.Ka()};var qb=!D||hb(9),rb=!D||hb(9),sb=D&&!L("9");!H||L("528");G&&L("1.9b")||D&&L("8")||Va&&L("9.5")||H&&L("528");G&&!L("8")||D&&L("9");function tb(a){tb[" "](a);return a}tb[" "]=v;function ub(a,b){a&&vb(this,a,b)}z(ub,ob);var wb=[1,4,2];q=ub.prototype;q.target=j;q.Nb=j;q.Lb=0;q.Mb=0;q.clientX=0;q.clientY=0;q.Ob=0;q.Pb=0;q.Jb=0;q.Y=0;q.Ja=0;q.pa=p;q.H=p;q.Q=p;q.Kb=p;q.za=p;q.t=j;
function vb(a,b,c){var d=a.type=b.type;ob.call(a,d);a.target=b.target||b.srcElement;a.d=c;if(c=b.relatedTarget){if(G){var e;a:{try{tb(c.nodeName);e=i;break a}catch(f){}e=p}e||(c=j)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.Nb=c;a.Lb=H||b.offsetX!==h?b.offsetX:b.layerX;a.Mb=H||b.offsetY!==h?b.offsetY:b.layerY;a.clientX=b.clientX!==h?b.clientX:b.pageX;a.clientY=b.clientY!==h?b.clientY:b.pageY;a.Ob=b.screenX||0;a.Pb=b.screenY||0;a.Jb=b.button;a.Y=b.keyCode||0;a.Ja=b.charCode||
("keypress"==d?b.keyCode:0);a.pa=b.ctrlKey;a.H=b.altKey;a.Q=b.shiftKey;a.Kb=b.metaKey;a.za=Oa?b.metaKey:b.ctrlKey;a.a=b.state;a.t=b;b.defaultPrevented&&a.o();delete a.R}function xb(a){return(qb?0==a.t.button:"click"==a.type?i:!!(a.t.button&wb[0]))&&!(H&&Oa&&a.pa)}q.Ka=function(){ub.h.Ka.call(this);this.t.stopPropagation?this.t.stopPropagation():this.t.cancelBubble=i};
q.o=function(){ub.h.o.call(this);var a=this.t;if(a.preventDefault)a.preventDefault();else if(a.returnValue=p,sb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};q.Ib=function(){return this.t};function yb(){}var zb=0;yb.prototype.key=0;yb.prototype.aa=p;yb.prototype.a=p;yb.prototype.handleEvent=function(a){return this.b?this.la.call(this.Qa||this.src,a):this.la.handleEvent.call(this.la,a)};var Ab={},Bb={},Cb={},Db={};
function N(a,b,c,d,e){if(b){if("array"==ca(b)){for(var f=0;f<b.length;f++)N(a,b[f],c,d,e);return j}var d=!!d,g=Bb;b in g||(g[b]={z:0,w:0});g=g[b];d in g||(g[d]={z:0,w:0},g.z++);var g=g[d],k=x(a),m;g.w++;if(g[k]){m=g[k];for(f=0;f<m.length;f++)if(g=m[f],g.la==c&&g.Qa==e){if(g.aa)break;return m[f].key}}else m=g[k]=[],g.z++;var s=Eb,n=rb?function(a){return s.call(n.src,n.key,a)}:function(a){a=s.call(n.src,n.key,a);if(!a)return a},f=n;f.src=a;var l=g=new yb;if(fa(c))l.b=i;else if(c&&c.handleEvent&&fa(c.handleEvent))l.b=
p;else throw Error("Invalid listener argument");l.la=c;l.c=f;l.src=a;l.type=b;l.capture=!!d;l.Qa=e;l.a=p;l.key=++zb;l.aa=p;c=g.key;f.key=c;m.push(g);Ab[c]=g;Cb[k]||(Cb[k]=[]);Cb[k].push(g);a.addEventListener?(a==t||!a.eb)&&a.addEventListener(b,f,d):a.attachEvent(b in Db?Db[b]:Db[b]="on"+b,f);return c}throw Error("Invalid event type");}function Fb(a,b,c,d,e){if("array"==ca(b)){for(var f=0;f<b.length;f++)Fb(a,b[f],c,d,e);return j}a=N(a,b,c,d,e);Ab[a].a=i;return a}
function Gb(a,b,c,d,e){if("array"==ca(b))for(var f=0;f<b.length;f++)Gb(a,b[f],c,d,e);else{d=!!d;a:{f=Bb;if(b in f&&(f=f[b],d in f&&(f=f[d],a=x(a),f[a]))){a=f[a];break a}a=j}if(a)for(f=0;f<a.length;f++)if(a[f].la==c&&a[f].capture==d&&a[f].Qa==e){P(a[f].key);break}}}
function P(a){if(!Ab[a])return p;var b=Ab[a];if(b.aa)return p;var c=b.src,d=b.type,e=b.c,f=b.capture;c.removeEventListener?(c==t||!c.eb)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Db?Db[d]:Db[d]="on"+d,e);c=x(c);if(Cb[c]){var e=Cb[c],g=Aa(e,b);0<=g&&B.splice.call(e,g,1);0==e.length&&delete Cb[c]}b.aa=i;if(b=Bb[d][f][c])b.qb=i,Hb(d,f,c,b);delete Ab[a];return i}
function Hb(a,b,c,d){if(!d.xa&&d.qb){for(var e=0,f=0;e<d.length;e++)d[e].aa?d[e].c.src=j:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.qb=p;0==f&&(delete Bb[a][b][c],Bb[a][b].z--,0==Bb[a][b].z&&(delete Bb[a][b],Bb[a].z--),0==Bb[a].z&&delete Bb[a])}}function Ib(a,b,c,d,e){var f=1,b=x(b);if(a[b]){a.w--;a=a[b];a.xa?a.xa++:a.xa=1;try{for(var g=a.length,k=0;k<g;k++){var m=a[k];m&&!m.aa&&(f&=Jb(m,e)!==p)}}finally{a.xa--,Hb(c,d,b,a)}}return Boolean(f)}function Jb(a,b){a.a&&P(a.key);return a.handleEvent(b)}
function Q(a,b){var c=b.type||b,d=Bb;if(!(c in d))return i;if(ea(b))b=new ob(b,a);else if(b instanceof ob)b.target=b.target||a;else{var e=b,b=new ob(c,a);Ja(b,e)}var e=1,f,d=d[c],c=i in d,g;if(c){f=[];for(g=a;g;g=g.Ua)f.push(g);g=d[i];g.w=g.z;for(var k=f.length-1;!b.R&&0<=k&&g.w;k--)b.d=f[k],e&=Ib(g,f[k],b.type,i,b)&&b.Ca!=p}if(p in d)if(g=d[p],g.w=g.z,c)for(k=0;!b.R&&k<f.length&&g.w;k++)b.d=f[k],e&=Ib(g,f[k],b.type,p,b)&&b.Ca!=p;else for(d=a;!b.R&&d&&g.w;d=d.Ua)b.d=d,e&=Ib(g,d,b.type,p,b)&&b.Ca!=
p;return Boolean(e)}
function Eb(a,b){if(!Ab[a])return i;var c=Ab[a],d=c.type,e=Bb;if(!(d in e))return i;var e=e[d],f,g;if(!rb){var k;if(!(k=b))a:{k=["window","event"];for(var m=t;f=k.shift();)if(m[f]!=j)m=m[f];else{k=j;break a}k=m}f=k;k=i in e;m=p in e;if(k){if(0>f.keyCode||f.returnValue!=h)return i;a:{var s=p;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(n){s=i}if(s||f.returnValue==h)f.returnValue=i}}s=new ub;vb(s,f,this);f=i;try{if(k){for(var l=[],r=s.d;r;r=r.parentNode)l.push(r);g=e[i];g.w=g.z;for(var w=l.length-
1;!s.R&&0<=w&&g.w;w--)s.d=l[w],f&=Ib(g,l[w],d,i,s);if(m){g=e[p];g.w=g.z;for(w=0;!s.R&&w<l.length&&g.w;w++)s.d=l[w],f&=Ib(g,l[w],d,p,s)}}else f=Jb(c,s)}finally{l&&(l.length=0)}return f}d=new ub(b,this);return f=Jb(c,d)};function Kb(){M.call(this)}z(Kb,M);q=Kb.prototype;q.eb=i;q.Ua=j;q.addEventListener=function(a,b,c,d){N(this,a,b,c,d)};q.removeEventListener=function(a,b,c,d){Gb(this,a,b,c,d)};q.j=function(){Kb.h.j.call(this);var a,b=0,c=a==j;a=!!a;if(this==j)Ga(Cb,function(d){for(var e=d.length-1;0<=e;e--){var f=d[e];if(c||a==f.capture)P(f.key),b++}});else{var d=x(this);if(Cb[d])for(var d=Cb[d],e=d.length-1;0<=e;e--){var f=d[e];if(c||a==f.capture)P(f.key),b++}}this.Ua=j};function S(a){M.call(this);u(a)&&this.ab(a)}z(S,Kb);var Lb={},Mb={},Nb={};function Ob(a){return a.substr(0,1).toUpperCase()+a.substr(1)}function Pb(a){return a.ol_accessors_||(a.ol_accessors_={})}function T(a){return Lb[a]||(Lb[a]=a.toLowerCase()+"_changed")}function V(a,b){var c=Pb(a);if(b in c){var d=c[b],c=d.target,d=d.key,e=Mb[d]||(Mb[d]="get"+Ob(d));return c[e]?c[e]():V(c,d)}return a[b]}
S.prototype.set=function(a,b){var c=Pb(this);if(a in c){var d=c[a],c=d.target,d=d.key,e=Nb[d]||(Nb[d]="set"+Ob(d));if(c[e])c[e](b);else c.set(d,b)}else this[a]=b,c=T(a),Q(this,c)};S.prototype.Ab=function(a){Ga(a,function(a,c){var d=Nb[c]||(Nb[c]="set"+Ob(c));if(this[d])this[d](a);else this.set(c,a)},this)};S.prototype.ab=S.prototype.Ab;function Qb(a,b,c,d,e){ob.call(this,a,e);this.a=b;this.index=c;this.b=d}z(Qb,ob);function Rb(a){S.call(this);this.a=a||[];Sb(this)}z(Rb,S);Rb.prototype.clear=function(){for(;this.length;){var a=V(this,"length")-1,b=this.a[a];B.splice.call(this.a,a,1);Sb(this);Q(this,new Qb("remove",b,h,h,this));Q(this,new Qb("remove_at",h,a,b,this))}};Rb.prototype.forEach=function(a,b){C(this.a,a,b)};
Rb.prototype.push=function(a){var b=this.a.length;Da(this.a,b,0,a);Sb(this);Q(this,new Qb("add",a,h,h,this));Q(this,new Qb("insert_at",a,b,h,this));return b};function Sb(a){a.set("length",a.a.length)};function Tb(a,b){var c=a%b;return 0>c*b?c+b:c};function Ub(a,b){this.x=u(a)?a:0;this.y=u(b)?b:0};function Vb(a,b){this.x=a;this.y=b}z(Vb,Ub);Vb.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};Vb.prototype.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};function W(a,b){Vb.call(this,a,b)}z(W,Vb);function Wb(a){return function(){return a}}var Xb=Wb(p),Yb=Wb(i),Zb=Wb(j);function $b(a,b,c){M.call(this);this.g=a;this.f=c;this.b=b||window;this.c=la(this.d,this)}z($b,M);$b.prototype.a=j;$b.prototype.e=p;function ac(a){if(a.a!=j){var b=bc(a),c=cc(a);b&&!c&&a.b.mozRequestAnimationFrame?P(a.a):b&&c?c.call(a.b,a.a):a.b.clearTimeout(a.a)}a.a=j}$b.prototype.d=function(){this.e&&this.a&&P(this.a);this.a=j;this.g.call(this.f,na())};$b.prototype.j=function(){ac(this);$b.h.j.call(this)};
function bc(a){a=a.b;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||j}function cc(a){a=a.b;return a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||j};var dc,ec=!D||hb(9);!G&&!D||D&&hb(9)||G&&L("1.9.1");D&&L("9");function fc(a,b){var c;c=a.className;c=ea(c)&&c.match(/\S+/g)||[];for(var d=Ea(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Aa(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};function gc(a,b){this.width=a;this.height=b}gc.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};gc.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};gc.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function hc(a){return a?new ic(jc(a)):dc||(dc=new ic)}var kc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function nc(a){a=a.document.documentElement;return new gc(a.clientWidth,a.clientHeight)}
function oc(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!ec&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ua(g.name),'"');if(g.type){f.push(' type="',ua(g.type),'"');var k={};Ja(k,g);delete k.type;g=k}f.push(">");f=f.join("")}f=e.createElement(f);if(g)if(ea(g))f.className=g;else if("array"==ca(g))fc.apply(j,[f].concat(g));else{var m=f;Ga(g,function(a,b){"style"==b?m.style.cssText=a:"class"==b?m.className=a:"for"==b?m.htmlFor=a:b in kc?m.setAttribute(kc[b],a):0==b.lastIndexOf("aria-",
0)||0==b.lastIndexOf("data-",0)?m.setAttribute(b,a):m[b]=a})}if(2<d.length)for(var s=e,n=f,e=function(a){a&&n.appendChild(ea(a)?s.createTextNode(a):a)},g=2;g<d.length;g++){var l=d[g];if(da(l)&&!(ga(l)&&0<l.nodeType)){var k=C,r;a:{if((r=l)&&"number"==typeof r.length){if(ga(r)){r="function"==typeof r.item||"string"==typeof r.item;break a}if(fa(r)){r="function"==typeof r.item;break a}}r=p}if(r)if(r=l.length,0<r){for(var w=Array(r),y=0;y<r;y++)w[y]=l[y];l=w}else l=[];k(l,e)}else e(l)}return f}
function pc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function jc(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function ic(a){this.a=a||t.document||document}ic.prototype.createElement=function(a){return this.a.createElement(a)};ic.prototype.createTextNode=function(a){return this.a.createTextNode(a)};function qc(a){var b=a.a,a=!H?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Ub(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}
ic.prototype.appendChild=function(a,b){a.appendChild(b)};function rc(a){M.call(this);this.W=a||window;this.wa=N(this.W,"resize",this.Wb,p,this);this.U=nc(this.W||window);if(H&&Pa||Va&&this.W.self!=this.W.top)this.Ea=window.setInterval(la(this.cb,this),sc)}z(rc,Kb);var sc=500;q=rc.prototype;q.wa=j;q.W=j;q.U=j;q.Ea=j;q.j=function(){rc.h.j.call(this);this.wa&&(P(this.wa),this.wa=j);this.Ea&&(window.clearInterval(this.Ea),this.Ea=j);this.U=this.W=j};q.Wb=function(){this.cb()};
q.cb=function(){var a=nc(this.W||window);if(!(a==this.U||(!a||!this.U?0:a.width==this.U.width&&a.height==this.U.height)))this.U=a,Q(this,"resize")};function tc(a,b,c,d,e){if(!D&&(!H||!L("525")))return i;if(Oa&&e)return uc(a);if(e&&!d||!c&&(17==b||18==b)||D&&d&&b==a)return p;switch(a){case 13:return!(D&&hb(9));case 27:return!H}return uc(a)}function uc(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||H&&0==a)return i;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return i;default:return p}}
function vc(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function wc(a,b){M.call(this);a&&(this.va&&xc(this),this.fa=a,this.ua=N(this.fa,"keypress",this,b),this.Ra=N(this.fa,"keydown",this.a,b,this),this.va=N(this.fa,"keyup",this.b,b,this))}z(wc,Kb);q=wc.prototype;q.fa=j;q.ua=j;q.Ra=j;q.va=j;q.M=-1;q.L=-1;q.Fa=p;
var yc={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},zc={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Ac=D||H&&L("525"),Bc=Oa&&G;
wc.prototype.a=function(a){if(H&&(17==this.M&&!a.pa||18==this.M&&!a.H))this.L=this.M=-1;Ac&&!tc(a.Y,this.M,a.Q,a.pa,a.H)?this.handleEvent(a):(this.L=G?vc(a.Y):a.Y,Bc&&(this.Fa=a.H))};wc.prototype.b=function(a){this.L=this.M=-1;this.Fa=a.H};
wc.prototype.handleEvent=function(a){var b=a.t,c,d,e=b.altKey;D&&"keypress"==a.type?(c=this.L,d=13!=c&&27!=c?b.keyCode:0):H&&"keypress"==a.type?(c=this.L,d=0<=b.charCode&&63232>b.charCode&&uc(c)?b.charCode:0):Va?(c=this.L,d=uc(c)?b.keyCode:0):(c=b.keyCode||this.L,d=b.charCode||0,Bc&&(e=this.Fa),Oa&&(63==d&&224==c)&&(c=191));var f=c,g=b.keyIdentifier;c?63232<=c&&c in yc?f=yc[c]:25==c&&a.Q&&(f=9):g&&g in zc&&(f=zc[g]);a=f==this.M;this.M=f;b=new Cc(f,d,a,b);b.H=e;Q(this,b)};
function xc(a){a.ua&&(P(a.ua),P(a.Ra),P(a.va),a.ua=j,a.Ra=j,a.va=j);a.fa=j;a.M=-1;a.L=-1}wc.prototype.j=function(){wc.h.j.call(this);xc(this)};function Cc(a,b,c,d){d&&vb(this,d,h);this.type="key";this.Y=a;this.Ja=b;this.b=c}z(Cc,ub);function Dc(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};function Ec(a,b){var c=jc(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,j))?c[b]||c.getPropertyValue(b)||"":""}function Fc(a,b){return a.currentStyle?a.currentStyle[b]:j}function Gc(a,b){return Ec(a,b)||Fc(a,b)||a.style&&a.style[b]}function Hc(a,b){var c,d,e=G&&(Oa||Ya)&&L("1.9");b instanceof Ub?(c=b.x,d=b.y):(c=b,d=h);a.style.left=Ic(c,e);a.style.top=Ic(d,e)}
function Jc(a){var b=a.getBoundingClientRect();D&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Kc(a){if(D&&!hb(8))return a.offsetParent;for(var b=jc(a),c=Gc(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Gc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return j}
function Lc(a){var b=new Ub;if(1==a.nodeType){if(a.getBoundingClientRect){var c=Jc(a);b.x=c.left;b.y=c.top}else{c=qc(hc(a));var d,e=jc(a),f=Gc(a,"position"),g=G&&e.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==f&&(d=e.getBoxObjectFor(a))&&(0>d.screenX||0>d.screenY),k=new Ub(0,0),m;d=e?jc(e):document;if(m=D)if(m=!hb(9))hc(d),m=p;m=m?d.body:d.documentElement;if(a!=m)if(a.getBoundingClientRect)d=Jc(a),e=qc(hc(e)),k.x=d.left+e.x,k.y=d.top+e.y;else if(e.getBoxObjectFor&&!g)d=e.getBoxObjectFor(a),
e=e.getBoxObjectFor(m),k.x=d.screenX-e.screenX,k.y=d.screenY-e.screenY;else{g=a;do{k.x+=g.offsetLeft;k.y+=g.offsetTop;g!=a&&(k.x+=g.clientLeft||0,k.y+=g.clientTop||0);if(H&&"fixed"==Gc(g,"position")){k.x+=e.body.scrollLeft;k.y+=e.body.scrollTop;break}g=g.offsetParent}while(g&&g!=a);if(Va||H&&"absolute"==f)k.y-=e.body.offsetTop;for(g=a;(g=Kc(g))&&g!=e.body&&g!=m;)if(k.x-=g.scrollLeft,!Va||"TR"!=g.tagName)k.y-=g.scrollTop}b.x=k.x-c.x;b.y=k.y-c.y}if(G&&!L(12)){var s;D?s="-ms-transform":H?s="-webkit-transform":
Va?s="-o-transform":G&&(s="-moz-transform");var n;s&&(n=Gc(a,s));n||(n=Gc(a,"transform"));n?(a=n.match(Mc),a=!a?new Ub(0,0):new Ub(parseFloat(a[1]),parseFloat(a[2]))):a=new Ub(0,0);b=new Ub(b.x+a.x,b.y+a.y)}}else s=fa(a.Ib),n=a,a.targetTouches?n=a.targetTouches[0]:s&&a.t.targetTouches&&(n=a.t.targetTouches[0]),b.x=n.clientX,b.y=n.clientY;return b}function Ic(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Nc(a,b){a.style.display=b?"":"none"}
function Oc(a,b){hc(jc(a));if(D&&!L("8")){var c=a.style,d;if(D){d=Pc(a,Fc(a,"paddingLeft"));var e=Pc(a,Fc(a,"paddingRight")),f=Pc(a,Fc(a,"paddingTop")),g=Pc(a,Fc(a,"paddingBottom"));d=new Dc(f,e,g,d)}else d=Ec(a,"paddingLeft"),e=Ec(a,"paddingRight"),f=Ec(a,"paddingTop"),g=Ec(a,"paddingBottom"),d=new Dc(parseFloat(f),parseFloat(e),parseFloat(g),parseFloat(d));if(D)var e=Qc(a,"borderLeft"),f=Qc(a,"borderRight"),g=Qc(a,"borderTop"),k=Qc(a,"borderBottom"),e=new Dc(g,f,k,e);else e=Ec(a,"borderLeftWidth"),
f=Ec(a,"borderRightWidth"),g=Ec(a,"borderTopWidth"),k=Ec(a,"borderBottomWidth"),e=new Dc(parseFloat(g),parseFloat(f),parseFloat(k),parseFloat(e));c.pixelWidth=b.width-e.left-d.left-d.right-e.right;c.pixelHeight=b.height-e.top-d.top-d.bottom-e.bottom}else c=a.style,G?c.MozBoxSizing="border-box":H?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(b.width,0)+"px",c.height=Math.max(b.height,0)+"px"}
function Pc(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}var Rc={thin:2,medium:4,thick:6};function Qc(a,b){if("none"==Fc(a,b+"Style"))return 0;var c=Fc(a,b+"Width");return c in Rc?Rc[c]:Pc(a,c)}var Mc=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Sc(a){M.call(this);this.a=a;a=ga(this.a)&&1==this.a.nodeType?this.a:this.a?this.a.body:j;this.e=!!a&&"rtl"==Gc(a,"direction");this.b=N(this.a,G?"DOMMouseScroll":"mousewheel",this)}z(Sc,Kb);
Sc.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.t;if("mousewheel"==a.type){c=1;if(D||H&&(Pa||L("532.0")))c=40;d=Tc(-a.wheelDelta,c);u(a.wheelDeltaX)?(b=Tc(-a.wheelDeltaX,c),c=Tc(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),u(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;"number"==typeof this.c&&(b=Math.min(Math.max(b,-this.c),this.c));"number"==typeof this.d&&(c=Math.min(Math.max(c,-this.d),this.d));this.e&&(b=-b);b=new Uc(d,a,b,c);Q(this,b)};
function Tc(a,b){return H&&(Oa||Qa)&&0!=a%b?a:a/b}Sc.prototype.j=function(){Sc.h.j.call(this);P(this.b);delete this.b};function Uc(a,b,c,d){b&&vb(this,b,h);this.type="mousewheel";this.e=a;this.c=c;this.b=d}z(Uc,ub);var Vc=document&&"ontouchstart"in document.documentElement;function Wc(a,b,c,d){this.d=a;this.c=b;this.b=c;this.a=d};function Xc(a,b){var c=a.length;if(a[0]<=b)return 0;if(!(b<=a[c-1])){var d;for(d=1;d<c;++d){if(a[d]==b)return d;if(a[d]<b)return a[d-1]-b<b-a[d]?d-1:d}}return c-1};function Yc(a,b){if(u(a))return a+b};function Zc(a){this.Ba=a;this.a=Yc};function $c(a,b){gc.call(this,a,b)}z($c,gc);function ad(a,b,c,d){this.b=a;this.a=b;this.c=c;this.d=d}ad.prototype.r=function(){return new W((this.b+this.c)/2,(this.a+this.d)/2)};ad.prototype.e=function(){return this.d-this.a};ad.prototype.f=function(){return this.c-this.b};ad.prototype.toString=function(){return"("+[this.b,this.a,this.c,this.d].join(", ")+")"};function bd(a,b,c,d){ad.call(this,a,b,c,d)}z(bd,ad);function cd(a){var b=arguments[0],b=new bd(b.x,b.y,b.x,b.y),c;for(c=1;c<arguments.length;++c){var d=arguments[c];b.b=Math.min(b.b,d.x);b.a=Math.min(b.a,d.y);b.c=Math.max(b.c,d.x);b.d=Math.max(b.d,d.y)}return b}bd.prototype.transform=function(a){var b=a(new W(this.b,this.a)),a=a(new W(this.c,this.d));return new bd(b.x,b.y,a.x,a.y)};function dd(a,b){ob.call(this,a);this.map=b;this.qa=p}z(dd,ob);dd.prototype.o=function(){dd.h.o.call(this);this.qa=i};function ed(a,b){Ub.call(this,a,b)}z(ed,Ub);function fd(a,b,c){dd.call(this,a,b);this.a=c;this.c=this.b=j}z(fd,dd);function gd(a){if(a.b===j){var b=a.map,c=hd(a);b.A()?(b=b.d,id(b),c=[c.x,c.y,0],jd(b.s,c,c),c=new W(c[0],c[1])):c=j;a.b=c}return a.b}function hd(a){if(a.c===j){var b,c=a.map.v;b=Lc(a.a);c=Lc(c);b=new Ub(b.x-c.x,b.y-c.y);a.c=new ed(b.x,b.y)}return a.c}function kd(a){this.a=a;this.d=j;this.c=p;this.f=0;this.e=this.b=j;a=this.a.v;Vc||N(a,["click","dblclick"],this.Ga,p,this);N(a,Vc?"touchstart":"mousedown",this.jb,p,this)}z(kd,Kb);
function ld(a){if(Vc){var b=a.t;b.touches&&b.touches.length&&(b=b.touches[0],a.clientX=b.clientX,a.clientY=b.clientY)}}q=kd.prototype;q.Ga=function(a){if(!this.c){var b;"dblclick"!==a.type&&(b=new fd(md,this.a,a),Q(this,b));this.f||(b=new fd(nd,this.a,a),Q(this,b))}};q.lb=function(a){if(this.d){if(!this.c){var b=(new Date).getTime();this.f=!this.f||250<b-this.f?b:0;Vc&&this.Ga(this.e)}this.e=j;C(this.b,P);this.d=this.b=j;this.c&&Q(this,new fd(od,this.a,a))}};
q.jb=function(a){this.d||(ld(a),this.e=a,this.d={clientX:a.clientX,clientY:a.clientY},this.c=p,this.b=[N(document,Vc?"touchmove":"mousemove",this.Hb,p,this),N(document,Vc?"touchend":"mouseup",this.lb,p,this)],"mousedown"===a.type&&a.o())};q.Hb=function(a){var b;this.c||(this.c=i,b=new fd(pd,this.a,this.e),Q(this,b));ld(a);this.d={clientX:a.clientX,clientY:a.clientY};a.o();b=new fd(qd,this.a,a);Q(this,b)};
q.j=function(){var a=this.a.v;Gb(a,Vc?"touchstart":"mousedown",this.jb,p,this);Gb(a,Vc?"touchend":"mouseup",this.lb,p,this);Gb(a,"click",this.Ga,p,this);this.b!==j&&(C(this.b,P),this.b=j);kd.h.j.call(this)};var md="click",nd="dblclick",pd="dragstart",qd="drag",od="dragend";function rd(a,b,c){this.a=a;this.b=b;this.c=c}function sd(a,b){rd.call(this,a,b.units,j);this.tb=b}z(sd,rd);var td={},ud={},vd={};function wd(a){C(a,function(a){ud[a.a]=a;xd(a,a,yd)});C(a,function(b){C(a,function(a){b!==a&&xd(b,a,yd)})})}function xd(a,b,c){a=a.a;b=b.a;a in vd||(vd[a]={});vd[a][b]=c}function zd(a){var b=ud[a];"Proj4js"in t&&!u(b)&&(b=Ad(a));u(b)||(b=j);return b}function Ad(a){var b=td[a];u(b)||(b=new Proj4js.Proj(a),b=new sd(a,b),td[a]=b);return b}
function Bd(a,b){var c=a.a,d=b.a,e;c in vd&&d in vd[c]&&(e=vd[c][d]);if("Proj4js"in t&&!u(e)){var f;f=(a instanceof sd?a:Ad(a.a)).tb;var g;g=(b instanceof sd?b:Ad(a.a)).tb;e=function(a){a=new Proj4js.Point(a.x,a.y);a=Proj4js.transform(f,g,a);return new W(a.x,a.y)};xd(a,b,e)}u(e)||(e=Cd);return e}function Cd(a){return a}function yd(a){return new W(a.x,a.y)}
var Dd=6378137*Math.PI,Ed=new bd(-Dd,-Dd,Dd,Dd),Fd=Ba(["EPSG:3857","EPSG:102100","EPSG:102113","EPSG:900913"],function(a){return new rd(a,"m",Ed)}),Gd=new bd(-180,-90,180,90),Hd=Ba(["CRS:84","EPSG:4326","urn:ogc:def:crs:EPSG:6.6:4326"],function(a){return new rd(a,"degrees",Gd)});wd(Fd);wd(Hd);function Id(a){var b=6378137*Math.PI*a.x/180,a=6378137*Math.log(Math.tan(Math.PI*(a.y+90)/360));return new W(b,a)}
function Jd(a){return new W(180*a.x/(6378137*Math.PI),360*Math.atan(Math.exp(a.y/6378137))/Math.PI-90)}C(Hd,function(a){C(Fd,function(b){xd(a,b,Id);xd(b,a,Jd)})});function Kd(a,b,c,d){ad.call(this,a,b,c,d)}z(Kd,ad);function Ld(a,b,c){Vb.call(this,b,c);this.q=a}z(Ld,W);function Md(a){a=a.split("/");a=Ba(a,function(a){return parseInt(a,10)});return new Ld(a[0],a[1],a[2])}Ld.prototype.hash=function(){return(this.x<<this.q)+this.y};Ld.prototype.toString=function(){return[this.q,this.x,this.y].join("/")};function Nd(a,b,c,d){ad.call(this,a,b,c,d)}z(Nd,ad);function Od(a,b,c,d){var e,f;for(e=a.b;e<=a.c;++e)for(f=a.a;f<=a.d;++f)c.call(d,new Ld(b,e,f))}Nd.prototype.e=function(){return this.d-this.a+1};Nd.prototype.f=function(){return this.c-this.b+1};function Pd(a){this.a=a.Va;this.f=this.a.length;this.g=u(a.G)?a.G:j;this.d=u(a.origin)?a.origin:j;this.e=j;u(a.lc)&&(this.e=a.lc);this.b=u(a.vb)?a.vb:new $c(256,256)}Pd.prototype.c=function(a,b,c){for(var d=Qd(this,a),a=a.q-1;0<=a&&!b.call(c,a,Rd(this,d,this.a[a]));)--a};function Sd(a,b){return a.d===j?a.e[b]:a.d}
function Td(a,b,c){var c=c/a.a[b.q],a=a.b,a=new $c(a.width/c,a.height/c),d,e,c=Math.round(b.x*a.width);d=Math.round((b.x+1)*a.width);e=Math.round(b.y*a.height);b=Math.round((b.y+1)*a.height);return new Kd(c,e,d,b)}function Rd(a,b,c){var d=Ud(a,new W(b.b,b.a),c),a=Ud(a,new W(b.c,b.d),c);return new Nd(d.x,d.y,a.x,a.y)}function Qd(a,b){var c=Sd(a,b.q),d=a.a[b.q],e=a.b,f=c.x+b.x*e.width*d,c=c.y+b.y*e.height*d;return new bd(f,c,f+e.width*d,c+e.height*d)}
function Ud(a,b,c){var d=Xc(a.a,c),e=c/a.a[d],f=Sd(a,d),b=new W(Math.floor((b.x-f.x)/c),Math.floor((b.y-f.y)/c)),f=a.b,f=new $c(f.width/e,f.height/e),d=new Ld(d,Math.floor(b.x/f.width),Math.floor(b.y/f.height)),a=Td(a,d,c);b.x<a.b?d.x-=1:b.x>=a.c&&(d.x+=1);b.y<a.a?d.y-=1:b.y>=a.d&&(d.y+=1);return d};function Vd(a){M.call(this);this.element=u(a.element)?a.element:j;this.f=a.target;this.a=j;u(a.map)&&this.I(a.map)}z(Vd,M);Vd.prototype.j=function(){pc(this.element);Vd.h.j.call(this)};Vd.prototype.I=function(a){this.a===j||pc(this.element);this.a=a;this.a!==j&&(u(this.f)?this.f:a.s).appendChild(this.element)};function Wd(){this.b='&copy; <a href="http://www.openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC BY-SA</a>';this.c=this.a=j};function Xd(a){var b=/\{(\d)-(\d)\}/.exec(a)||/\{([a-z])-([a-z])\}/.exec(a);if(b){var c=[],d=b[2].charCodeAt(0),e;for(e=b[1].charCodeAt(0);e<=d;++e)c.push(a.replace(b[0],String.fromCharCode(e)));return Yd(Ba(c,Xd))}return function(b){return b===j?h:a.replace("{z}",b.q).replace("{x}",b.x).replace("{y}",b.y)}}function Yd(a){return function(b){if(b!==j){var c=Tb(b.hash(),a.length);return a[c](b)}}}function Zd(){}function $d(a,b){return function(c){return c===j?h:b(a(c))}};function ae(a){M.call(this);this.e=u(a.D)?a.D:j;this.d=u(a.G)?a.G:a.D.c;this.a=u(a.X)?a.X:j}z(ae,Kb);ae.prototype.ka=Yb;function X(a){S.call(this);this.a=a.source;this.g(u(a.Db)?a.Db:0);this.i(u(a.Eb)?a.Eb:1);this.k(u(a.Zb)?a.Zb:0);this.l(u(a.opacity)?a.opacity:1);this.n(u(a.pc)?a.pc:1);this.p(u(a.visible)?a.visible:i);this.a.ka()||Fb(this.a,"load",this.s,p,this)}z(X,S);X.prototype.c=function(){return V(this,"brightness")};X.prototype.getBrightness=X.prototype.c;X.prototype.d=function(){return V(this,"contrast")};X.prototype.getContrast=X.prototype.d;X.prototype.e=function(){return V(this,"hue")};
X.prototype.getHue=X.prototype.e;X.prototype.b=function(){return V(this,"opacity")};X.prototype.getOpacity=X.prototype.b;X.prototype.f=function(){return V(this,"saturation")};X.prototype.getSaturation=X.prototype.f;X.prototype.J=function(){return V(this,"visible")};X.prototype.getVisible=X.prototype.J;X.prototype.s=function(){Q(this,"load")};X.prototype.ka=function(){return this.a.ka()};X.prototype.g=function(a){a=Math.min(Math.max(a,-1),1);a!=this.c()&&this.set("brightness",a)};
X.prototype.setBrightness=X.prototype.g;X.prototype.i=function(a){a=Math.max(0,a);a!=this.d()&&this.set("contrast",a)};X.prototype.setContrast=X.prototype.i;X.prototype.k=function(a){a!=this.e()&&this.set("hue",a)};X.prototype.setHue=X.prototype.k;X.prototype.l=function(a){a=Math.min(Math.max(a,0),1);a!=this.b()&&this.set("opacity",a)};X.prototype.setOpacity=X.prototype.l;X.prototype.n=function(a){a=Math.max(0,a);a!=this.f()&&this.set("saturation",a)};X.prototype.setSaturation=X.prototype.n;
X.prototype.p=function(a){a=!!a;a!=this.J()&&this.set("visible",a)};X.prototype.setVisible=X.prototype.p;function be(a){this.g=document.createElement("UL");var b=oc("DIV",{"class":"ol-attribution"},this.g);this.c=j;this.e={};this.O={};this.b={};this.d=j;Vd.call(this,{element:b,map:a.map,target:a.target})}z(be,Vd);q=be.prototype;q.sb=function(a){var b=x(a);this.e[b]=N(a,T("visible"),this.Tb,p,this);a.a.ka()?ce(this,a):Fb(a,"load",this.gc,p,this)};
function ce(a,b){var c=b.a.a;if(c!==j){var d=a.a,e=d.A(),f=de(d),g=d.g(),k=d.a(),m=b.J(),s;s=e&&m?ee(a,b,f,k,g):j;C(c,function(a){var b=x(a),c=document.createElement("LI");c.innerHTML=a.b;(!d.A||!m||s===j||!s[b])&&"none"!=c.style.display&&Nc(c,p);this.g.appendChild(c);this.O[b]=c},a)}}
function ee(a,b,c,d,e){var f=b.a,b=f.a;if(b===j)return j;var g;f instanceof fe&&(g=Xc(f.V.a,d));var k={};C(b,function(a){var b=x(a),n=i;if(b in this.b)a=this.b[b];else{var l=a.c,a=a.a;if(a!==j&&!(l===e||(l.b!=e.b?0:Bd(l,e)===yd))){var r=Bd(l,e);r!==yd&&(a=Ba(a,function(a){return a.transform(r)}))}this.b[b]=a}a===j||(n=f instanceof fe?Ca(a,function(a){return a.b(c,g)}):Ca(a,function(a){return a.a(c,d)}));k[b]=n},a);return k}q.gc=function(a){ce(this,a.target)};
q.Tb=function(a){var b=this.a,c=b.A(),d=de(b),e=b.g(),b=b.a();ge(this,a.target,c,d,b,e)};q.hc=function(a){this.sb(a.a)};q.ic=function(a){var a=a.a,b=x(a);P(this.e[b]);delete this.e[b];C(a.a.a,function(a){a=x(a);delete this.b[a];pc(this.O[a]);delete this.O[a]},this)};q.Pa=function(){var a=this.a,b=a.A(),c=de(a),d=a.g(),e=a.a();V(a,he).forEach(function(a){ge(this,a,b,c,e,d)},this)};
q.kb=function(){this.c!==j&&(C(this.c,P),this.c=j);Ga(this.O,function(a){pc(a)},this);this.O={};this.b={};var a=V(this.a,he);a!=j&&(a.forEach(this.sb,this),this.c=[N(a,"add",this.hc,p,this),N(a,"remove",this.ic,p,this)])};q.I=function(a){this.d===j||C(this.d,P);this.d=j;be.h.I.call(this,a);a!==j&&(this.d=[N(a,T(ie),this.Pa,p,this),N(a,T(he),this.kb,p,this),N(a,T(je),this.Pa,p,this),N(a,T(ke),this.Pa,p,this)],this.kb())};
function ge(a,b,c,d,e,f){c&&b.J()?(b=ee(a,b,d,e,f),Ga(b,function(a,b){var c=this.O[b];"none"!=c.style.display!=a&&Nc(c,a)},a)):(b=b.a.a,b===j||C(b,function(a){a=x(a);Nc(this.O[a],p)},a))};function le(a){var b=Vc?"touchend":"click",c=oc("A",{href:"#zoomIn","class":"ol-zoom-in"},"+");N(c,b,this.c,p,this);var d=oc("A",{href:"#zoomOut","class":"ol-zoom-out"},"\u2212");N(d,b,this.d,p,this);b=oc("DIV","ol-zoom ol-unselectable",c,d);Vd.call(this,{element:b,map:a.map,target:a.target});this.b=u(a.fb)?a.fb:1}z(le,Vd);le.prototype.c=function(a){a.o();this.a.zoom(this.b)};le.prototype.d=function(a){a.o();this.a.zoom(-this.b)};function me(){};function ne(a){this.a=a}z(ne,me);ne.prototype.e=function(a){var b=a.a;if(a.type==nd&&(Vc||xb(a.a))){var c=a.map,d=gd(a);c.zoom(a.a.Q?-this.a:this.a,d);a.o();b.o()}};function oe(a){return a.H&&!a.za&&!a.Q}function pe(a){return!a.H&&!a.za&&!a.Q}function qe(a){return!a.H&&!a.za&&a.Q};function re(){this.i=p;this.ab=this.Ya=this.p=this.n=0;this.na=this.l=j}z(re,me);re.prototype.k=v;re.prototype.K=v;re.prototype.d=Xb;re.prototype.e=function(a){var b=a.map;if(b.A()){var c=a.a;this.i?a.type==qd?(this.c=c.clientX-this.n,this.b=c.clientY-this.p,this.k(a)):a.type==od&&(this.c=c.clientX-this.n,this.b=c.clientY-this.p,this.K(a),this.i=p):a.type==pd&&(this.n=c.clientX,this.p=c.clientY,this.b=this.c=0,this.l=b.r(),this.na=gd(a),this.d(a)&&(this.i=i,a.o()))}};function se(a){re.call(this);this.Da=a}z(se,re);se.prototype.k=function(a){var a=a.map,b=a.a(),c=a.c(),b=new W(-b*this.c,b*this.b);a.d.$()&&u(c)&&b.rotate(c);c=new W(this.l.x+b.x,this.l.y+b.y);te(a);a.ba(c)};se.prototype.d=function(a){return this.Da(a.a)?(te(a.map),i):p};for(var ue=0,ve=["ms","moz","webkit","o"],we=0;we<ve.length&&!window.requestAnimationFrame;++we)window.requestAnimationFrame=window[ve[we]+"RequestAnimationFrame"],window.cancelRequestAnimationFrame=window[ve[we]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-ue)),d=window.setTimeout(function(){a(b+c)},c);ue=b+c;return d});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});function xe(a){se.call(this,a)}z(xe,se);xe.prototype.d=function(a){se.prototype.d.call(this,a);this.N=new Date;return i};xe.prototype.K=function(a){this.s=new Date-this.N;this.f={x:this.c/this.s,y:this.b/this.s};this.a={x:2E4*this.f.x,y:2E4*this.f.y};this.g=a.map;this.B=p;this.T!==i&&(N(this.g.v,Vc?"touchend":"mousedown",this.F,p,this),N(this.g,T(je),this.F,p,this),this.T=i);alert("dragSpeedX: "+this.f.x+", dragSpeedY: "+this.f.y+", impulseX: "+this.a.x+", impulseY: "+this.a.y);this.ma()};
xe.prototype.ma=function(){var a=this,b=this.g.r();this.g.ba(new W(b.x-this.a.x,b.y+this.a.y));this.a.x/=1.06;this.a.y/=1.06;!this.B&&!(500>=Math.abs(this.a.x)&&500>=Math.abs(this.a.y))&&window.requestAnimationFrame(function(){a.ma.call(a)})};xe.prototype.F=function(){this.B=i};function ye(a){re.call(this);this.f=a;this.a=0}z(ye,re);ye.prototype.k=function(a){var b=a.map,c=b.b(),a=hd(a),c=Math.atan2(c.height/2-a.y,a.x-c.width/2);te(b);b.rotate(this.a,-c)};ye.prototype.d=function(a){var b=a.a,c=a.map;return xb(b)&&this.f(b)&&c.d.$()?(te(c),b=c.b(),a=hd(a),a=Math.atan2(b.height/2-a.y,a.x-b.width/2),this.a=(c.c()||0)+a,i):p};function ze(a){var b=oc("DIV","ol-dragbox");this.b=j;this.d=a.na;this.c=j;Vd.call(this,{element:b,map:a.map})}z(ze,Vd);ze.prototype.I=function(a){this.c!==j&&(P(this.c),this.c=j);a!==j&&(this.b=Ae(a,this.d),Hc(this.element,this.b),Oc(this.element,new $c(0,0)),this.c=N(a,qd,this.e,p,this));ze.h.I.call(this,a)};ze.prototype.e=function(a){var b=this.a,a=gd(a),b=Ae(b,a);Hc(this.element,new ed(Math.min(b.x,this.b.x),Math.min(b.y,this.b.y)));Oc(this.element,new $c(Math.abs(b.x-this.b.x),Math.abs(b.y-this.b.y)))};function Be(a){re.call(this);this.f=a;this.a=j}z(Be,re);Be.prototype.K=function(a){this.a.I(j);this.a=j;if(64<=this.c*this.c+this.b*this.b){var b=a.map,c=cd(this.na,gd(a));Ce(b,function(){this.ba(c.r());var a;a=this.b();a=u(a)?Math.max((c.c-c.b)/a.width,(c.d-c.a)/a.height):h;a=this.l.Ba(a,0);this.k(a);this.d.$()&&this.B(0)},b)}};Be.prototype.d=function(a){var b=a.a;return xb(b)&&this.f(b)?(this.a=new ze({map:a.map,na:this.na}),i):p};function De(a){this.a=a}z(De,me);De.prototype.e=function(a){if("key"==a.type){var b=a.a,c=b.Y;if(40==c||37==c||39==c||38==c){var d=a.map,e=d.a()*this.a,c=40==c?new W(0,-e):37==c?new W(-e,0):39==c?new W(e,0):new W(0,e),e=d.r();d.ba(new W(e.x+c.x,e.y+c.y));b.o();a.o()}}};function Ee(){}z(Ee,me);Ee.prototype.e=function(a){if("key"==a.type){var b=a.a,c=b.Ja;if(43==c||45==c)a.map.zoom(43==c?4:-4),b.o(),a.o()}};function Fe(a){this.a=a}z(Fe,me);Fe.prototype.e=function(a){if("mousewheel"==a.type){var b=a.map,c=a.a,d=gd(a),e=0>c.b?this.a:-this.a;te(b);b.zoom(e,d);a.o();c.o()}};function Ge(a,b){S.call(this);this.f=a;this.a=b;N(this.a,T("brightness"),this.La,p,this);N(this.a,T("contrast"),this.Ma,p,this);N(this.a,T("hue"),this.Na,p,this);N(this.a,"load",this.Sa,p,this);N(this.a,T("opacity"),this.ra,p,this);N(this.a,T("saturation"),this.Oa,p,this);N(this.a,T("visible"),this.sa,p,this)}z(Ge,S);q=Ge.prototype;q.u=function(){return this.a};q.P=function(){return this.f};q.La=v;q.Ma=v;q.Na=v;q.Sa=v;q.ra=v;q.Oa=v;q.sa=v;function He(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}He.prototype.a=4;He.prototype.set=function(a,b){for(var b=b||0,c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};He.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(He.BYTES_PER_ELEMENT=4,He.prototype.BYTES_PER_ELEMENT=He.prototype.a,He.prototype.set=He.prototype.set,He.prototype.toString=He.prototype.toString,aa("Float32Array",He));function Ie(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Ie.prototype.a=8;Ie.prototype.set=function(a,b){for(var b=b||0,c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Ie.prototype.toString=Array.prototype.join;"undefined"==typeof Float64Array&&(Ie.BYTES_PER_ELEMENT=8,Ie.prototype.BYTES_PER_ELEMENT=Ie.prototype.a,Ie.prototype.set=Ie.prototype.set,Ie.prototype.toString=Ie.prototype.toString,aa("Float64Array",Ie));function Je(){var a=Array(16);Ke(a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return a}function Ke(a,b,c,d,e,f,g,k,m,s,n,l,r,w,y,I,J){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=g;a[6]=k;a[7]=m;a[8]=s;a[9]=n;a[10]=l;a[11]=r;a[12]=w;a[13]=y;a[14]=I;a[15]=J}function Le(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1}
function Me(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],k=a[4],m=a[5],s=a[6],n=a[7],l=a[8],r=a[9],w=a[10],y=a[11],I=a[12],J=a[13],E=a[14],a=a[15],A=b[0],O=b[1],R=b[2],K=b[3],Z=b[4],U=b[5],oa=b[6],pa=b[7],qa=b[8],ra=b[9],sa=b[10],ta=b[11],F=b[12],lc=b[13],mc=b[14],b=b[15];c[0]=d*A+k*O+l*R+I*K;c[1]=e*A+m*O+r*R+J*K;c[2]=f*A+s*O+w*R+E*K;c[3]=g*A+n*O+y*R+a*K;c[4]=d*Z+k*U+l*oa+I*pa;c[5]=e*Z+m*U+r*oa+J*pa;c[6]=f*Z+s*U+w*oa+E*pa;c[7]=g*Z+n*U+y*oa+a*pa;c[8]=d*qa+k*ra+l*sa+I*ta;c[9]=e*qa+m*ra+r*sa+J*ta;c[10]=f*
qa+s*ra+w*sa+E*ta;c[11]=g*qa+n*ra+y*sa+a*ta;c[12]=d*F+k*lc+l*mc+I*b;c[13]=e*F+m*lc+r*mc+J*b;c[14]=f*F+s*lc+w*mc+E*b;c[15]=g*F+n*lc+y*mc+a*b}function jd(a,b,c){var d=b[0],e=b[1],b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}function Ne(a,b,c){var d=a[1]*b+a[5]*c+0*a[9]+a[13],e=a[2]*b+a[6]*c+0*a[10]+a[14],f=a[3]*b+a[7]*c+0*a[11]+a[15];a[12]=a[0]*b+a[4]*c+0*a[8]+a[12];a[13]=d;a[14]=e;a[15]=f}
function Oe(a,b,c){Ke(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,1*a[8],1*a[9],1*a[10],1*a[11],a[12],a[13],a[14],a[15])}function Pe(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],k=a[5],m=a[6],s=a[7],n=Math.cos(b),l=Math.sin(b);a[0]=c*n+g*l;a[1]=d*n+k*l;a[2]=e*n+m*l;a[3]=f*n+s*l;a[4]=c*-l+g*n;a[5]=d*-l+k*n;a[6]=e*-l+m*n;a[7]=f*-l+s*n}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function Qe(a,b){M.call(this);this.T=a;this.map=b;this.C={};this.e=j;this.c=Je();this.s=Je();this.d=i;this.B=[N(b,T(Re),this.gb,p,this),N(b,T(ie),this.ga,p,this),N(b,T(he),this.Ub,p,this),N(b,T(je),this.ha,p,this),N(b,T(Se),this.ia,p,this),N(b,T(ke),this.ja,p,this)]}z(Qe,M);q=Qe.prototype;q.ya=function(a){var b=this.Ha(a);this.Wa(a,b)};q.$=Xb;q.Ha=Zb;q.j=function(){Ga(this.C,function(a){nb(a)});C(this.B,P);this.e===j||C(this.e,P);Qe.h.j.call(this)};
function Te(a,b,c){var d=V(a.map,he);u(d)&&d.forEach(function(a,d){if(a.ka()&&a.J()){var g=x(a);b.call(c,a,this.C[g],d)}},a)}q.gb=v;q.ga=function(){this.d=i};q.jc=function(a){this.ya(a.a)};q.Ub=function(){var a=this.C,b=[],c=0,d;for(d in a)b[c++]=a[d];C(b,function(a){this.Aa(a)},this);this.C={};this.e!==j&&(C(this.e,P),this.e=j);a=V(this.map,he);a!=j&&(a.forEach(this.ya,this),this.e=[N(a,"add",this.jc,p,this),N(a,"remove",this.kc,p,this)])};q.kc=function(a){this.Ta(a.a)};q.ha=function(){this.d=i};
q.ia=function(){this.d=i};q.ja=function(){this.d=i};q.Ta=function(a){nb(this.Aa(a))};q.Aa=function(a){a=x(a);if(a in this.C){var b=this.C[a];delete this.C[a];return b}return j};q.S=Xb;q.Wa=function(a,b){var c=x(a);this.C[c]=b};
function id(a){if(a.d){var b=a.map,c=b.r(),d=b.a(),e=b.c(),b=b.b();Le(a.c);Ne(a.c,b.width/2,b.height/2);Oe(a.c,1/d,-1/d);a.$()&&u(e)&&Pe(a.c,-e);Ne(a.c,-c.x,-c.y);var f=a.c,c=a.s,d=f[0],e=f[1],b=f[2],g=f[3],k=f[4],m=f[5],s=f[6],n=f[7],l=f[8],r=f[9],w=f[10],y=f[11],I=f[12],J=f[13],E=f[14],f=f[15],A=d*m-e*k,O=d*s-b*k,R=d*n-g*k,K=e*s-b*m,Z=e*n-g*m,U=b*n-g*s,oa=l*J-r*I,pa=l*E-w*I,qa=l*f-y*I,ra=r*E-w*J,sa=r*f-y*J,ta=w*f-y*E,F=A*ta-O*sa+R*ra+K*qa-Z*pa+U*oa;0!=F&&(F=1/F,c[0]=(m*ta-s*sa+n*ra)*F,c[1]=(-e*
ta+b*sa-g*ra)*F,c[2]=(J*U-E*Z+f*K)*F,c[3]=(-r*U+w*Z-y*K)*F,c[4]=(-k*ta+s*qa-n*pa)*F,c[5]=(d*ta-b*qa+g*pa)*F,c[6]=(-I*U+E*R-f*O)*F,c[7]=(l*U-w*R+y*O)*F,c[8]=(k*sa-m*qa+n*oa)*F,c[9]=(-d*sa+e*qa-g*oa)*F,c[10]=(I*Z-J*R+f*A)*F,c[11]=(-l*Z+r*R-y*A)*F,c[12]=(-k*ra+m*pa-s*oa)*F,c[13]=(d*ra-e*pa+b*oa)*F,c[14]=(-I*K+J*O-E*A)*F,c[15]=(l*K-r*O+w*A)*F);a.d=p}};function Ue(a,b,c){M.call(this);this.Xa=a;this.g=b;this.a=0;this.b=new Image;c!==j&&(this.b.crossOrigin=c);this.d={};this.c=j}z(Ue,Kb);function Ve(a,b){if(u(b)){var c,d=x(b);if(d in a.d)return a.d[d];a:{for(c in a.d){c=p;break a}c=i}c=c?a.b:a.b.cloneNode(p);return a.d[d]=c}return a.b}Ue.prototype.e=function(){this.a=3;C(this.c,P);this.c=j};Ue.prototype.f=function(){this.a=2;C(this.c,P);this.c=j;Q(this,"change")};
function We(a){0==a.a&&(a.a=1,a.c=[Fb(a.b,"error",a.e,p,a),Fb(a.b,"load",a.f,p,a)],a.b.src=a.g)};function fe(a){ae.call(this,{X:a.X,G:a.G,D:a.D});this.V=u(a.V)?a.V:j;this.ca=u(a.ca)?a.ca:Zd;this.c=u(a.crossOrigin)?a.crossOrigin:"anonymous";this.b={}}z(fe,ae);function Xe(a,b){var c=b.toString();if(c in a.b)return a.b[c];var d=a.ca(b),d=u(d)?new Ue(b,d,a.c):j;return a.b[c]=d};function Ye(a){X.call(this,a)}z(Ye,X);function Ze(a,b,c){Ge.call(this,a,b);this.target=c;this.origin=j;this.ra();this.sa()}z(Ze,Ge);Ze.prototype.P=function(){return Ze.h.P.call(this)};Ze.prototype.Sa=function(){Y(this.f.map)};Ze.prototype.ra=function(){var a=this.u().b(),b=this.target.style;"opacity"in b?b.opacity=a:"MozOpacity"in b?b.MozOpacity=a:"filter"in b&&(b.filter=""===a?"":"alpha(opacity="+100*a+")")};Ze.prototype.sa=function(){Nc(this.target,this.u().J())};function $e(a,b,c){Ze.call(this,a,b,c);this.b={};this.c=h}z($e,Ze);$e.prototype.u=function(){return $e.h.u.call(this)};
$e.prototype.S=function(){var a=this.f.map;if(a.A()){var b=af(a),a=a.a(),c=a!==this.c,d=this.u().a,e=d.V,f=Xc(e.a,a),g={};g[f]={};var k=i;Od(Rd(e,b,a),f,function(a){var b=Xe(d,a);if(b!==j){var c=b.Xa.toString(),l=b.a;if(0==l)We(b);else if(2==l){g[f][c]=b;return}k=p;e.c(a,function(a,b){var c=i;Od(b,a,function(b){var e=b.toString();if(!g[a]||!g[a][e])b=Xe(d,b),b!==j&&2==b.a?(a in g||(g[a]={}),g[a][e]=b):c=p});return c})}},this);var m=Ba(Ha(g),Number);B.sort.call(m,Fa);for(var b=document.createDocumentFragment(),
s=document.createDocumentFragment(),n=p,l=p,r=0,w=m.length;r<w;++r){var y=m[r],I=g[y],J;J=a;var E=Sd(this.u().a.V,y);J=new W(Math.round((this.origin.x-E.x)/J),Math.round((E.y-this.origin.y)/J));for(var A in I){var E=I[A],O=Td(e,E.Xa,a),R=Ve(E,this),K=R.style,Z=!(A in this.b);if(Z||c)K.left=O.b-J.x+"px",K.top=-O.d-J.y+"px",K.width=O.f()+"px",K.height=O.e()+"px";Z&&(this.b[A]=E,K.position="absolute",y===f?(b.appendChild(R),n=i):(s.appendChild(R),l=i))}}l&&((A=this.target.firstChild)?A.parentNode&&A.parentNode.insertBefore(s,
A):this.target.appendChild(s));n&&this.target.appendChild(b);this.c=a;for(var U in this.b)a=Md(U),a=g[a.q],a&&U in a||(a=this.b[U],delete this.b[U],pc(Ve(a,this)));return!k}};function bf(a,b){Qe.call(this,a,b);this.a=document.createElement("DIV");this.a.className="ol-layers-pane ol-unselectable";var c=this.a.style;c.position="absolute";c.width="100%";c.height="100%";a.insertBefore(this.a,a.childNodes[0]||j);this.p={};this.f=j;this.l=h;this.g=j;this.n=h;this.i=j}z(bf,Qe);
function cf(a,b,c,d){b="translate("+Math.round(b)+"px, "+Math.round(c)+"px) rotate("+d.toFixed(6)+"rad) scale3d(1, 1, 1)";a=a.a.style;a.WebkitTransform=b;a.MozTransform=b;a.a=b;a.msTransform=b;a.transform=b}q=bf.prototype;q.$=Yb;q.Ha=function(a){if(a instanceof Ye){var b=document.createElement("DIV");b.className="ol-layer";b.style.position="absolute";this.a.appendChild(b);a=new $e(this,a,b);this.p[x(a)]=b;return a}return j};q.ga=function(){bf.h.ga.call(this);Y(this.map)};
q.ha=function(){bf.h.ha.call(this);Y(this.map)};q.ia=function(){bf.h.ia.call(this);Y(this.map)};q.ja=function(){bf.h.ja.call(this);Y(this.map)};
q.S=function(a){var b=this.map;if(b.A()){var c=b.r(),d=b.b(),e=b.a(),f=b.c();if(this.f===j)df(this);else if(e!==this.l||!(d.width==this.g.width&&d.height==this.g.height))df(this);else if(!(c==this.f||this.f&&c.x==this.f.x&&c.y==this.f.y)||f!==this.n){var g=this.map,k=g.a(),m=g.r(),s=g.b(),n=this.i,l=(m.x-n.x)/k,k=(n.y-m.y)/k;ef(this,l,k);cf(this,-(l-s.width/2),-(k-s.height/2),g.c())}this.f=c;this.l=e;this.n=f;this.g=d;var r=p;Te(this,function(b,c){c.S(a)&&(r=i)});r&&te(b)}};
function df(a){var b=a.map,c=b.b(),d=c.width/2,c=c.height/2,e=b.r(),f=b.a(),g=new W(e.x-f*d,e.y+f*c);a.i=g;ef(a,d,c);cf(a,0,0,b.c());Ga(a.C,function(a){a.origin=g})}function ef(a,b,c){b=Math.round(b)+"px "+Math.round(c)+"px";a=a.a.style;a.WebkitTransformOrigin=b;a.MozTransformOrigin=b;a.b=b;a.c=b;a.d=b};var ff=["webgl","webgl-experimental","webkit-3d","moz-webgl"];function gf(a,b){var c,d,e=ff.length;for(d=0;d<e;++d)try{if(c=a.getContext(ff[d],b),c!==j)return c}catch(f){}return j};function hf(){if(!("WebGLRenderingContext"in t))return p;try{var a=document.createElement("CANVAS");return gf(a)!==j}catch(b){return p}};function jf(a){this.a=a}function kf(a){this.a=a}z(kf,jf);kf.prototype.b=function(){return 35632};function lf(a){this.a=a}z(lf,jf);lf.prototype.b=function(){return 35633};function mf(a,b){Ge.call(this,a,b);this.n=new Float32Array(16);this.s=new Float32Array(16);this.B=new Float32Array(16);this.F=new Float32Array(16);this.p=new Float32Array(16);this.c=i;this.La();this.Ma();this.Na();this.Oa()}z(mf,Ge);function nf(a){Q(a,"change")}function of(a){if(a.c){var b=a.p;Le(b);Me(b,a.s,b);Me(b,a.n,b);Me(b,a.F,b);Me(b,a.B,b);a.c=p}return a.p}q=mf.prototype;q.P=function(){return mf.h.P.call(this)};
q.La=function(){var a=this.u().c(),b=this.n;Le(b);b[12]=a;b[13]=a;b[14]=a;b[15]=1;this.c=i;nf(this)};q.Ma=function(){var a=this.u().d(),b=this.s;Le(b);b[0]=a;b[5]=a;b[10]=a;b[15]=1;a=-0.5*a+0.5;b[12]=a;b[13]=a;b[14]=a;b[15]=1;this.c=i;nf(this)};
q.Na=function(){var a=this.u().e(),b=Math.cos(a),a=Math.sin(a);Ke(this.B,0.213+0.787*b-0.213*a,0.213-0.213*b+0.143*a,0.213-0.213*b-0.787*a,0,0.715-0.715*b-0.715*a,0.715+0.285*b+0.14*a,0.715-0.715*b+0.715*a,0,0.072-0.072*b+0.928*a,0.072-0.072*b-0.283*a,0.072+0.928*b+0.072*a,0,0,0,0,1);this.c=i;nf(this)};q.Sa=function(){nf(this)};q.ra=function(){nf(this)};
q.Oa=function(){var a=this.u().f();Ke(this.F,0.213+0.787*a,0.213-0.213*a,0.213-0.213*a,0,0.715-0.715*a,0.715+0.285*a,0.715-0.715*a,0,0.072-0.072*a,0.072-0.072*a,0.072+0.928*a,0,0,0,0,1);this.c=i;nf(this)};q.sa=function(){nf(this)};q.ta=v;function pf(){this.a="precision mediump float;\n\nuniform sampler2D uTexture;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n gl_FragColor = texture2D(uTexture, vTexCoord);\n}"}z(pf,kf);ba(pf);function qf(){this.a="attribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\n\nuniform vec4 uTileOffset;\n\nvoid main(void) {\n  gl_Position.xy = aPosition * uTileOffset.xy + uTileOffset.zw;\n  gl_Position.z = 0.;\n  gl_Position.w = 1.;\n  vTexCoord = aTexCoord;\n}"}z(qf,lf);ba(qf);
function rf(a,b){mf.call(this,a,b);this.N=pf.oa();this.T=qf.oa();this.e=this.i=this.g=this.m=j;this.k=h;this.d=Je();this.l=this.b=j}z(rf,mf);rf.prototype.j=function(){var a=this.P().b;a.isContextLost()||(a.deleteBuffer(this.g),a.deleteFramebuffer(this.e),a.deleteTexture(this.i));rf.h.j.call(this)};rf.prototype.u=function(){return rf.h.u.call(this)};rf.prototype.ta=function(){this.e=this.i=this.g=this.m=j;this.k=h};
rf.prototype.S=function(){var a=p,b=this.P(),c=this.f.map,d=b.b,e=c.r(),f=de(c),g=c.a(),k=af(c),m=c.c(),s=this.u().a,n=s.V,l=Xc(n.a,g),r=n.a[l],k=Rd(n,k,r),w;if(this.b!==j&&this.b.b==k.b&&k.c==this.b.c&&this.b.a==k.a&&k.a==this.b.a)w=this.l;else{var g=new $c(k.f(),k.e()),y=n.b,g=Math.max(g.width*y.width,g.height*y.height),g=Math.pow(2,Math.ceil(Math.log(g)/Math.log(2))),I=new $c(r*g,r*g),J=Sd(n,l),E=J.x+k.b*y.width*r,r=J.y+k.a*y.height*r;w=new bd(E,r,E+I.width,r+I.height);r=this.P().b;!u(this.k)||
this.k!=g?(Fb(this.f.map,sf,ma(function(a,b,c){a.isContextLost()||(a.deleteFramebuffer(b),a.deleteTexture(c))},r,this.e,this.i)),y=r.createTexture(),r.bindTexture(3553,y),r.texImage2D(3553,0,6408,g,g,0,6408,5121,j),r.texParameteri(3553,10240,9729),r.texParameteri(3553,10241,9729),E=r.createFramebuffer(),r.bindFramebuffer(36160,E),r.framebufferTexture2D(36160,36064,3553,y,0),this.i=y,this.e=E,this.k=g):r.bindFramebuffer(36160,this.e);d.viewport(0,0,g,g);d.clearColor(0,0,0,0);d.clear(16384);d.disable(3042);
g=tf(b,this.N,this.T);d.useProgram(g);this.m===j&&(this.m={da:d.getAttribLocation(g,"aPosition"),ea:d.getAttribLocation(g,"aTexCoord"),vc:d.getUniformLocation(g,"uTileOffset"),Za:d.getUniformLocation(g,"uTexture")});this.g===j?(g=d.createBuffer(),d.bindBuffer(34962,g),d.bufferData(34962,new Float32Array([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),35044),this.g=g):d.bindBuffer(34962,this.g);d.enableVertexAttribArray(this.m.da);d.vertexAttribPointer(this.m.da,2,5126,p,16,0);d.enableVertexAttribArray(this.m.ea);
d.vertexAttribPointer(this.m.ea,2,5126,p,16,8);d.uniform1i(this.m.Za,0);var A={},O=[],R=i;A[l]={};Od(k,l,function(a){var c=Xe(s,a);if(c!==j){var d=c.a;if(0==d)We(c);else if(2==d){d=Ve(c);if(d.src in b.k){A[l][a.toString()]=c;return}O.push(d)}else if(3==d)return;R=p;n.c(a,function(a,b){var c=i;Od(b,a,function(b){var d=b.toString();if(!A[a]||!A[a][d])b=Xe(s,b),b!==j&&2==b.a?(A[a]||(A[a]={}),A[a][d]=b):c=p});return c})}},this);g=Ba(Ha(A),Number);B.sort.call(g,Fa);var K=new Float32Array(4);C(g,function(a){Ga(A[a],
function(a){var c=Qd(n,a.Xa),e=2*c.e()/I.height,f=2*(c.b-w.b)/I.width-1,g=2*(c.a-w.a)/I.height-1;K[0]=2*c.f()/I.width;K[1]=e;K[2]=f;K[3]=g;d.uniform4fv(this.m.vc,K);uf(b,Ve(a));d.drawArrays(5,0,4)},this)},this);0==O.length||Fb(c,sf,ma(function(a,b){C(b,function(b){uf(a,b)})},b,O));R?(this.b=k,this.l=w):(this.l=this.b=j,a=i)}Le(this.d);Ne(this.d,(e.x-w.b)/(w.c-w.b),(e.y-w.a)/(w.d-w.a));u(m)&&Pe(this.d,m);Oe(this.d,(f.c-f.b)/(w.c-w.b),(f.d-f.a)/(w.d-w.a));Ne(this.d,-0.5,-0.5);return a};function vf(){this.a="precision mediump float;\n\nuniform mat4 uColorMatrix;\nuniform float uOpacity;\nuniform mat4 uMatrix;\nuniform sampler2D uTexture;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n\n  vec4 texCoord = uMatrix * vec4(vTexCoord, 0., 1.);\n  vec4 texColor = texture2D(uTexture, texCoord.st);\n  vec4 color = uColorMatrix * vec4(texColor.rgb, 1.);\n  color.a = texColor.a * uOpacity;\n\n  gl_FragColor = color;\n\n}"}z(vf,kf);ba(vf);
function wf(){this.a="attribute vec2 aPosition;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  gl_Position = vec4(aPosition, 0., 1.);\n  vTexCoord = aTexCoord;\n}"}z(wf,lf);ba(wf);
function xf(a,b){Qe.call(this,a,b);this.a=document.createElement("CANVAS");this.a.height=a.clientHeight;this.a.width=a.clientWidth;this.a.className="ol-unselectable";a.insertBefore(this.a,a.childNodes[0]||j);this.n=new $c(a.clientHeight,a.clientWidth);this.b=gf(this.a,{alpha:p,antialias:i,depth:p,preserveDrawingBuffer:p,stencil:p});N(this.a,"webglcontextlost",this.ta,p,this);N(this.a,"webglcontextrestored",this.Yb,p,this);this.f=new Wc(1,1,1,1);this.l=this.m=j;this.i={};this.g={};this.k={};this.F=
vf.oa();this.N=wf.oa();this.p={};yf(this)}z(xf,Qe);q=xf.prototype;q.ya=function(a){xf.h.ya.call(this,a);a.J()&&Y(this.map)};
function uf(a,b){var c=a.b,d=b.src,e=a.k[d];u(e)?(c.bindTexture(3553,e.ub),9729!=e.ob&&(c.texParameteri(3553,10240,9729),e.ob=9729),9729!=e.pb&&(c.texParameteri(3553,10240,9729),e.pb=9729)):(e=c.createTexture(),c.bindTexture(3553,e),c.texImage2D(3553,0,6408,6408,5121,b),c.texParameteri(3553,10240,9729),c.texParameteri(3553,10241,9729),c.texParameteri(3553,10242,33071),c.texParameteri(3553,10243,33071),a.k[d]={ub:e,ob:9729,pb:9729})}q.$=Yb;q.Ha=function(a){return a instanceof Ye?new rf(this,a):j};
q.j=function(){var a=this.b;a.isContextLost()||(Ga(this.g,function(b){a.deleteProgram(b)}),Ga(this.i,function(b){a.deleteShader(b)}),Ga(this.k,function(b){a.deleteTexture(b.ub)}));xf.h.j.call(this)};function tf(a,b,c){var d=x(b)+"/"+x(c);if(d in a.g)return a.g[d];var e=a.b,f=e.createProgram();e.attachShader(f,zf(a,b));e.attachShader(f,zf(a,c));e.linkProgram(f);return a.g[d]=f}
function zf(a,b){var c=x(b);if(c in a.i)return a.i[c];var d=a.b,e=d.createShader(b.b());d.shaderSource(e,b.a);d.compileShader(e);return a.i[c]=e}q.gb=function(){var a=this.map.F();this.f=new Wc(a.d/255,a.c/255,a.b/255,a.a/255);Y(this.map)};q.ga=function(){xf.h.ga.call(this);Y(this.map)};q.Sb=function(){Y(this.map)};q.ha=function(){xf.h.ha.call(this);Y(this.map)};q.ia=function(){xf.h.ia.call(this);Y(this.map)};q.ja=function(){xf.h.ja.call(this);Y(this.map)};
q.ta=function(a){a.o();this.l=this.m=j;this.i={};this.g={};this.k={};Ga(this.C,function(a){a.ta()})};q.Yb=function(){yf(this);Y(this.map)};function yf(a){a=a.b;a.activeTexture(33984);a.blendFunc(770,771);a.disable(2884);a.disable(2929);a.disable(3089)}q.Ta=function(a){xf.h.Ta.call(this,a);a.J()&&Y(this.map)};q.Aa=function(a){var b=xf.h.Aa.call(this,a);b!==j&&(a=x(a),P(this.p[a]),delete this.p[a]);return b};
q.S=function(a){if(this.map.A()){var b=p;Te(this,function(c,d){d.S(a)&&(b=i)});var c=this.map.b();this.n.width==c.width&&this.n.height==c.height||(this.a.width=c.width,this.a.height=c.height,this.n=c);var d=this.b;d.bindFramebuffer(36160,j);d.clearColor(this.f.d,this.f.c,this.f.b,this.f.a);d.clear(16384);d.enable(3042);d.viewport(0,0,c.width,c.height);c=tf(this,this.F,this.N);d.useProgram(c);this.m===j&&(this.m={da:d.getAttribLocation(c,"aPosition"),ea:d.getAttribLocation(c,"aTexCoord"),sc:d.getUniformLocation(c,
"uColorMatrix"),tc:d.getUniformLocation(c,"uMatrix"),uc:d.getUniformLocation(c,"uOpacity"),Za:d.getUniformLocation(c,"uTexture")});this.l===j?(c=d.createBuffer(),d.bindBuffer(34962,c),d.bufferData(34962,new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),35044),this.l=c):d.bindBuffer(34962,this.l);d.enableVertexAttribArray(this.m.da);d.vertexAttribPointer(this.m.da,2,5126,p,16,0);d.enableVertexAttribArray(this.m.ea);d.vertexAttribPointer(this.m.ea,2,5126,p,16,8);d.uniform1i(this.m.Za,0);Te(this,
function(a,b){d.uniformMatrix4fv(this.m.tc,p,b.d);d.uniformMatrix4fv(this.m.sc,p,of(b));d.uniform1f(this.m.uc,a.b());d.bindTexture(3553,b.i);d.drawArrays(5,0,4)},this);b&&te(this.map)}};q.Wa=function(a,b){xf.h.Wa.call(this,a,b);var c=x(a);this.p[c]=N(b,"change",this.Sb,p,this)};var Af=["webgl","dom"],sf="postrender",Re="backgroundColor",ie="center",he="layers",je="resolution",Se="rotation",ke="size";
function $(a){var b,c;S.call(this);var d={};u(a.center)&&(d[ie]=a.center);d[he]=u(a.nb)?a.nb:new Rb;d.projection=a.D!=j?ea(a.D)?zd(a.D):a.D:zd("EPSG:3857");u(a.Ba)?d[je]=a.Ba:u(a.zoom)&&(d[je]=Dd/(128<<a.zoom));d.userProjection=a.$a!=j?ea(a.$a)?zd(a.$a):a.$a:zd("EPSG:4326");c=Qe;var e;e=u(a.oc)?a.oc:u(a.nc)?[a.nc]:Af;var f;for(f=0;f<e.length;++f)if(b=e[f],"dom"==b){if(Yb()){c=bf;break}}else if("webgl"==b&&hf()){c=xf;break}if(u(a.Va)){var g=a.Va;e=function(a,b){if(u(a)){var c=Xc(g,a),c=Math.min(Math.max(c+
b,0),g.length-1);return g[c]}}}else{u(a.cc)&&u(a.fc)&&u(a.xc)?(e=a.cc,f=a.fc,b=a.xc):(e=Dd/128,f=116,b=Math.exp(Math.log(2)/4));var k=b,m=e,s=f-1;e=function(a,b){if(u(a)){var c=Math.floor(Math.log(m/a)/Math.log(k)+0.5),c=Math.max(c+b,0);u(s)&&(c=Math.min(c,s));return m/Math.pow(k,c)}}}f=new Zc(e);u(a.controls)?e=a.controls:(e=new Rb,e.push(new be({})),e.push(new le({fb:u(a.bb)?a.bb:4})));if(u(a.$b))b=a.$b;else{b=new Rb;(u(a.rotate)?a.rotate:1)&&b.push(new ye(oe));if(u(a.Fb)?a.Fb:1)b.push(new ne(u(a.bb)?
a.bb:4));(u(a.Gb)?a.Gb:1)&&b.push(new xe(pe));var n=u(a.bc)?a.bc:80;if(u(a.ac)?a.ac:1)b.push(new De(n)),b.push(new Ee);if(u(a.dc)?a.dc:1)b.push(new Fe(u(a.ec)?a.ec:1));(u(a.rc)?a.rc:1)&&b.push(new Be(qe))}a=ea(a.target)?document.getElementById(a.target):a.target;this.wb=Cd;this.T=yd;this.e=new $b(this.mc,h,this);lb(this,this.e);this.f=0;this.i=p;this.p=a;this.l=f;this.v=oc("DIV","ol-viewport");this.v.style.position="relative";this.v.style.overflow="hidden";this.v.style.width="100%";this.v.style.height=
"100%";this.p.appendChild(this.v);this.s=oc("DIV","ol-overlaycontainer");N(this.s,["click",Vc?"touchstart":"mousedown"],pb);this.v.appendChild(this.s);a=new kd(this);N(a,[md,nd,pd,qd,od],this.rb,p,this);lb(this,a);a=new wc(document);N(a,"key",this.hb,p,this);lb(this,a);a=new Sc(this.v);N(a,"mousewheel",this.hb,p,this);lb(this,a);this.n=e;N(this.n,"add",this.Qb,p,this);N(this.n,"remove",this.Rb,p,this);this.xb=b;this.d=new c(this.v,this);lb(this,this.d);this.Cb=new rc;N(this.Cb,"resize",this.ib,p,
this);N(this,T("projection"),this.Vb,p,this);N(this,T("userProjection"),this.Xb,p,this);this.ab(d);this.ib();this.n.forEach(function(a){a.I(this)},this)}z($,S);$.prototype.j=function(){pc(this.v);$.h.j.call(this)};$.prototype.F=function(){return V(this,Re)};$.prototype.getBackgroundColor=$.prototype.F;$.prototype.r=function(){return V(this,ie)};$.prototype.getCenter=$.prototype.r;
function de(a){if(a.A()){var b=a.r(),c=a.a(),a=a.b();return new bd(b.x-c*a.width/2,b.y-c*a.height/2,b.x+c*a.width/2,b.y+c*a.height/2)}}function Ae(a,b){if(a.A()){var c=a.d;id(c);var d=[b.x,b.y,0];jd(c.c,d,d);return new ed(d[0],d[1])}}$.prototype.g=function(){return V(this,"projection")};$.prototype.getProjection=$.prototype.g;$.prototype.a=function(){return V(this,je)};$.prototype.getResolution=$.prototype.a;
function af(a){var b=a.r(),c=a.a(),d=a.c()||0,e=a.b(),a=c*e.width/2,c=c*e.height/2,c=[new W(-a,-c),new W(-a,c),new W(a,-c),new W(a,c)];C(c,function(a){a.rotate(d);a.add(b)});return cd.apply(j,c)}$.prototype.c=function(){return V(this,Se)||0};$.prototype.getRotation=$.prototype.c;$.prototype.b=function(){return V(this,ke)};$.prototype.getSize=$.prototype.b;$.prototype.N=function(){return V(this,"userProjection")};$.prototype.getUserProjection=$.prototype.N;q=$.prototype;
q.hb=function(a,b){this.rb(new fd(b||a.type,this,a))};q.Qb=function(a){a.a.I(this)};q.Rb=function(a){a.a.I(j)};q.rb=function(a){var b=this.xb.a;if(Q(this,a)!==p)for(var c=b.length-1;0<=c&&!(b[c].e(a),a.qa);c--);};q.Vb=function(){Bf(this)};q.Xb=function(){Bf(this)};q.ib=function(){this.Ya(new $c(this.p.clientWidth,this.p.clientHeight))};q.A=function(){var a;if(a=this.r()!=j)if(a=u(this.a()))a=this.b()!=j;return a};
function Bf(a){var b=a.g(),c=a.N();b!=j&&c!=j?(a.T=Bd(b,c),a.wb=Bd(c,b)):(a.T=yd,a.wb=Cd)}function Y(a){a.e.a==j&&(0===a.f?(a=a.e,ac(a),a.d()):a.i=i)}
function te(a){if(0===a.f){if(a.e.a==j){a=a.e;ac(a);a.e=p;var b=bc(a),c=cc(a);if(b&&!c&&a.b.mozRequestAnimationFrame)a.a=N(a.b,"MozBeforePaint",a.c),a.b.mozRequestAnimationFrame(j),a.e=i;else{if(b&&c)b=b.call(a.b,a.c);else{var d=a.c,e;e=e||0;b=a.b.setTimeout(function(){return d.apply(this,Array.prototype.slice.call(arguments,0,e))},20)}a.a=b}}}else a.i=i}q.mc=function(a){0==this.f&&(this.d.S(a),this.i=p,Q(this,sf))};q.rotate=function(a,b){a=this.l.a(a,b);this.B(a)};q.qc=function(a){this.set(Re,a)};
$.prototype.setBackgroundColor=$.prototype.qc;$.prototype.ba=function(a){this.set(ie,a)};$.prototype.setCenter=$.prototype.ba;$.prototype.zb=function(a){this.set(he,a)};$.prototype.setLayers=$.prototype.zb;$.prototype.yb=function(a){this.set("projection",a)};$.prototype.setProjection=$.prototype.yb;$.prototype.k=function(a){this.set(je,a)};$.prototype.setResolution=$.prototype.k;$.prototype.B=function(a){this.set(Se,a)};$.prototype.setRotation=$.prototype.B;
$.prototype.Ya=function(a){this.set(ke,a)};$.prototype.setSize=$.prototype.Ya;$.prototype.Bb=function(a){this.set("userProjection",a)};$.prototype.setUserProjection=$.prototype.Bb;function Ce(a,b,c){++a.f;try{b.call(c)}finally{0===--a.f&&a.i&&(a=a.e,ac(a),a.d())}}$.prototype.zoom=function(a,b){var c=this.l.Ba(this.a(),a);if(c!=j&&b!=j){var d=this.r(),e=this.a(),f=new W(b.x-c*(b.x-d.x)/e,b.y-c*(b.y-d.y)/e);Ce(this,function(){this.ba(f);this.k(c)},this)}else this.k(c)};function Cf(a){var b=Array(a.Z+1),c;for(c=0;c<=a.Z;++c)b[c]=Dd/(128<<c);Pd.call(this,{G:Ed,origin:new W(-Dd,Dd),Va:b,vb:new $c(256,256)})}z(Cf,Pd);Cf.prototype.c=function(a,b,c){for(var d=a.x,e=a.y,a=a.q,f;;){a-=1;if(0>a)break;d=Math.floor(d/2);e=Math.floor(e/2);f=new Nd(d,e,d,e);if(b.call(c,a,f))break}};function Df(a){var b=a.D||zd("EPSG:3857"),c=Zd;u(a.ca)?c=a.ca:u(a.wc)?c=Yd(Ba(a.wc,Xd)):u(a.url)&&(c=Xd(a.url));var d=new Cf({Z:a.Z}),e=a.G,c=e!=j?$d(function(b){if(a.Z<b.q)return j;var c=1<<b.q,k=-b.y-1;if(0>k||c<=k)return j;var c=Tb(b.x,c),m=Qd(d,new Ld(b.q,c,b.y));return!(m.b<=e.c&&m.c>=e.b&&m.a<=e.d&&m.d>=e.a)?j:new Ld(b.q,c,k)},c):$d(function(b){if(a.Z<b.q)return j;var c=1<<b.q,d=-b.y-1;return 0>d||c<=d?j:new Ld(b.q,Tb(b.x,c),d)},c);fe.call(this,{X:a.X,crossOrigin:a.crossOrigin,G:a.G,D:b,V:d,
ca:c})}z(Df,fe);function Ef(){Df.call(this,{X:[new Wd],Z:18,url:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}z(Ef,Df);var Ff=new Ye({source:new Ef});new $({center:new W(55,37),nb:new Rb([Ff]),target:"map",zoom:5});(function() {

var plovr = plovr || {};

/** @typedef {input:string,message:string,isError:boolean,lineNumber:number} */
plovr.CompilationError;

plovr.htmlEscape = function(str) {
  return str.replace(/[&<"]/g, function(ch) {
    switch (ch) {
      case '&': return '&amp;';
      case '<': return '&lt;';
      case '"': return '&quot;';
    }
  });
};

plovr.ERROR_STYLE =
  'color: #A00;' +
  'background-color: #FFF;' +
  'font-family: monospace;' +
  'font-size: 12px;' +
  'border: 1px solid #A00;' +
  'padding: 1px 3px;'

plovr.WARNING_STYLE =
  'color: #F29000;' +
  'background-color: #FFF;' +
  'font-family: monospace;' +
  'font-size: 12px;' +
  'border: 1px solid #F29000;' +
  'padding: 1px 3px;'

/**
 * @type {Array.<plovr.CompilationError>}
 */
plovr.errors_ = [];

/**
 * @param {Array.<plovr.CompilationError>} errors
 */
plovr.addErrors = function(errors) {
  for (var i = 0; i < errors.length; i++) plovr.errors_.push(errors[i]);
};

/**
 * @type {Array.<plovr.CompilationError>}
 */
plovr.warnings_ = [];

/**
 * @param {Array.<plovr.CompilationError>} errors
 */
plovr.addWarnings = function(warnings) {
  for (var i = 0; i < warnings.length; i++) plovr.warnings_.push(warnings[i]);
};

/** @type {string} */
plovr.configId_ = '';

/** @return {string} */
plovr.getConfigId = function() {
  return plovr.configId_;
};

/** @param {string} */
plovr.setConfigId = function(configId) {
  plovr.configId_ = configId;
};

/** @type {string} */
plovr.viewSourceUrl_ = '';

/** @param {string} viewSourceUrl */
plovr.setViewSourceUrl = function(viewSourceUrl) {
  plovr.viewSourceUrl_ = viewSourceUrl;
};

/** @return {string} */
plovr.getViewSourceUrl = function() {
  return plovr.viewSourceUrl_;
};

/**
 * @param {Array.<plovr.CompilationError>} errors
 * @param {Array.<string>} html
 * @param {string} style
 */
plovr.writeErrors_ = function(errors, html, style) {
  for (var i = 0, len = errors.length; i < len; i++) {
    var error = errors[i];
    var message = error['message'];

    // Check whether the message starts with the name followed by a line number,
    // and if so, hyperlink it.
    var prefix = error['input'] + ':' + error['lineNumber'] + ':';
    var anchor;
    if (message.indexOf(prefix) == 0) {
      message = message.substring(prefix.length);
      anchor = '<a target="_blank" ' +
          'href="' + plovr.getViewSourceUrl() +
          '?id=' + encodeURIComponent(plovr.getConfigId()) +
          '&name=' + encodeURIComponent(error['input']) +
          '#' + error['lineNumber'] + '">' +
          plovr.htmlEscape(prefix) +
          '</a>';
    } else if (error['input']) {
      // This is likely a Soy error, which is less likely to include line
      // numbers or the clear ERROR/WARNING text provided by the Compiler.
      anchor = '<a target="_blank" ' +
          'href="' + plovr.getViewSourceUrl() +
          '?id=' + encodeURIComponent(plovr.getConfigId()) +
          '&name=' + encodeURIComponent(error['input']) + '">' +
          plovr.htmlEscape(error['input']) +
          ':</a> ' +
          (style == plovr.ERROR_STYLE ? 'ERROR' : 'WARNING') +
          ' - ';
    }

    var htmlMessage = plovr.htmlEscape(message);
    htmlMessage = htmlMessage.replace(/\n/g, '<br>');

    if (anchor) {
      htmlMessage = anchor + htmlMessage;
    }
    html.push('<div style="', style, '">', htmlMessage, '</div>');
  }
};

/**
 * Writes the errors into a DIV as the first child of the BODY, so the BODY must
 * be available when this is run.
 */
plovr.writeErrors = function() {
  // TODO(bolinfest): Make it possible to expand and collapse errors.

  var div = document.createElement('div');

  // Give div its own CSS class (plovr-error-report) so that users can style it.
  // For example, they may need to change the position or the z-index:
  //
  // http://code.google.com/p/plovr/issues/detail?id=34
  //
  // A class is used rather than an id in case there are multiple plovr configs
  // loaded on the same page. An additional CSS class is included (parameterized
  // by config id) so that multiple config error boxes can be styled separately.
  var configId = plovr.getConfigId();
  div.className = 'plovr-error-report plovr-error-report-config-id-' + configId;

  var html = [];
  plovr.writeErrors_(plovr.errors_, html, plovr.ERROR_STYLE);
  plovr.writeErrors_(plovr.warnings_, html, plovr.WARNING_STYLE);

  div.innerHTML = html.join('');
  document.body.insertBefore(div, document.body.firstChild);
}

plovr.writeErrorsOnLoad = function() {
  if (document.body) {
    plovr.writeErrors();
  } else if (window.addEventListener) {
    window.addEventListener('load', plovr.writeErrors, false);
  } else if (window.attachEvent) {
    window.attachEvent('onload', plovr.writeErrors);
  }
};

window['plovr'] = plovr;

})();
plovr.addErrors([]);
plovr.addWarnings([]);
plovr.setConfigId("full-screen");
plovr.setViewSourceUrl("http://localhost:9810/view");
plovr.writeErrorsOnLoad();
